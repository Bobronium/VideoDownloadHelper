!function(e){var t={};function r(o){if(t[o])return t[o].exports;var u=t[o]={i:o,l:!1,exports:{}};return e[o].call(u.exports,u,u.exports,r),u.l=!0,u.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var u in e)r.d(o,u,function(t){return e[t]}.bind(null,u));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";String.prototype.TrimToLength=function(e){return this.length>e?this.substring(0,e)+"...":this};const o=e=>{let t;return(t=(t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0]).toLowerCase().replace("www.","")},u=e=>{if(e instanceof Array){for(let t=0;t<e.length;++t)if(!u(e[t]))return!1;return!0}if(null==e)return!1;if(""==e)return!1;if(e.length<=7)return!1;function t(e){return/^(https?:)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/{1,2}((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)}return!!t(e)||!!(e.length>5&&(e.startsWith("http:\\/\\/")||e.startsWith("https:\\/\\/")))&&t(e.replace(/\\\//g,"/"))};void 0!==e.exports&&(e.exports={getParameterByName:function(e,t){e=e.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},FixURL:function(e){if(e&&void 0!==e.length){if(e.length>5&&(e.startsWith("http:\\/\\/")||e.startsWith("https:\\/\\/")))return e.replace(/\\\//g,"/");if(e.length>5&&"/"==e.charAt(0)&&"/"==e.charAt(1))return"http:"+e}return e},extractDomain:o,ValidURL:u}),Array.prototype.uniq=function(){return[...new Set(this)]}},function(e,t,r){const{steemit_domains:o,max_url_length:u}=r(2),{extractDomain:n,FixURL:i,ValidURL:s,getParameterByName:c}=r(0),{ParseVideo:l}=r(3);!function(){"use strict";let e=document.location.href,t=n(e),r=document.documentElement.outerHTML,u="",a=null,m=new l(e,r);if(u=m.Parse(),s(u))chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(u)});else{if(t.includes("tumblr.com")&&!s(u)&&(a=document.querySelector("div.tumblr_video_container>iframe"))&&(u=a.getAttribute("src"),s(u))){let e=u;u="",$.ajax({type:"GET",dataType:"html",url:e,success:function(e){let t=$(e).find("source[type='video/mp4']");t&&(u=t.attr("src"),s(u)&&chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(i(u))}))},error:function(e,t,r){},complete:function(e){}})}if(t.includes("weibo.com")||t.includes("video.sina.com.cn")){if(!s(u)&&(a=document.querySelector("div[node-type='common_video_player']"))){let e=a.getAttribute("action-data");e.length>10&&((e=c("video_src",e)).length>0&&(e=decodeURIComponent(e)),s(e)&&e.includes("ssig=")&&e.includes("Expires=")&&(u=e))}if(!s(u)){let e=/video_src=([^&]*)/i.exec(r);if(null!=e){let t=decodeURIComponent(e[1]);s(t)&&(u=t)}}}if(t.includes("imgur.com")&&(s(u)||(a=document.querySelector("source[type='video/mp4']"))&&(u=a.getAttribute("src")),s(u)||(a=document.querySelector("meta[name='twitter:player:stream']"))&&(u=a.getAttribute("content"))),o.includes(t)&&(s(u)||(a=document.querySelector("div.videoWrapper>iframe"))&&(u=a.getAttribute("src"))),t.includes("d.tube")&&!s(u)&&(a=document.querySelector("div.embed>iframe"))&&(u=a.getAttribute("src"),s(u))){let e=u;$.ajax({type:"GET",dataType:"html",url:e,success:function(e){let t=$(e).find("source[type='video/mp4']");t&&(u=t.attr("src"),s(u)&&chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(i(u))}))},error:function(e,t,r){},complete:function(e){}})}if(t.includes("miaopai.com")&&!s(u)){let t=/.*miaopai\.com\/show\/(.*)\.html?$/i.exec(e);if(null!=t)u="http://gslb.miaopai.com/stream/"+t[1]+".mp4";else if(a=document.querySelector("meta[property='og:videosrc']")){let e=a.replace("http://p.weibo.com/show/","");(e=e.replace(".swf",""))&&(u="http://gslb.miaopai.com/stream/"+e+".mp4")}}if(t.includes("facebook.com")){if(!s(u)){let e=/['"]?hd_src_no_ratelimit['"]?: *(['"])(https?:[^\s'",]+)\1,/gi,t=e.exec(r);for(;null!=t&&(u=t[2],!s(u));)t=e.exec(r)}if(!s(u)){let e=/['"]?hd_src['"]?: *(['"])(https?:[^\s'",]+)\1,/gi,t=e.exec(r);for(;null!=t&&(u=t[2],!s(u));)t=e.exec(r)}if(!s(u)){let e=/['"]?sd_src_no_ratelimit['"]?: *(['"])(https?:[^\s'",]+)\1,/gi,t=e.exec(r);for(;null!=t&&(u=t[2],!s(u));)t=e.exec(r)}if(!s(u)){let e=/['"]?sd_src['"]?: *(['"])(https?:[^\s'",]+)\1,/gi,t=e.exec(r);for(;null!=t&&(u=t[2],!s(u));)t=e.exec(r)}}if(t.includes("v1.cn")&&!s(u)&&(a=document.querySelector("param[name='Flashlets']"))){let e=a.getAttribute("value");if(e.length){let t=/videoUrl=(.*)/i.exec(e);null!=t&&s(t[1])&&(u=t[1])}}if(t.includes("meipai.com")&&!s(u)){let e="";if((a=document.querySelector("meta[property='og:video:secure_url']"))?e=a.getAttribute("content"):(a=document.querySelector("meta[property='og:video']"))&&(e=a.getAttribute("content")),e=e.trim(),s(e))u=e;else{function d(e,t){let r=e.substring(0,parseInt(t[0])),o=e.substring(parseInt(t[0]),parseInt(t[0])+parseInt(t[1]));return r+e.substring(parseInt(t[0])).replace(o,"")}let t=function(e){return{str:e.substring(4),hex:e.substring(0,4).split("").reverse().join("")}}(e),r=function(e){let t=parseInt(e,16)+"";return{pre:t.substring(0,2).split(""),tail:t.substring(2).split("")}}(t.hex),o=d(t.str,r.pre);e=atob(d(o,function(e,t){return t[0]=e.length-parseInt(t[0])-parseInt(t[1]),t}(o,r.tail))),s(e)&&(u=e)}}if(t.includes("vimeo.com")&&(s(u)||(a=document.querySelector("meta[property*='video']"))&&(u=a.getAttribute("content"),$.ajax({type:"GET",dataType:"html",url:u,success:function(e){let t=/,"url":"([^"\']+)"/gi,r=t.exec(e),o=[];for(;null!=r;){let u=i(r[1]);s(u)&&o.push(u),r=t.exec(e)}o.length>0?chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(o)}):chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(i(u))})},error:function(e,t,r){},complete:function(e){}}))),t.includes("ted.com")&&!s(u)){let e=/{"uri":"([^"\']+)"/gi,t=e.exec(r),o=[];for(;null!=t;){let u=i(t[1]);s(u)&&o.push(u),t=e.exec(r)}o.length>0?chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(o)}):chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(i(u))})}if(t.includes("pearvideo.com")&&!s(u)){let e=/srcUrl="([^"\']+)"/gi,t=e.exec(r),o=[];for(;null!=t;){let u=i(t[1]);s(u)&&o.push(u),t=e.exec(r)}o.length>0?chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(o)}):chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(i(u))})}if(t.includes("xiaokaxiu.com")&&!s(u)){let e=/player.swf\?scid=([^"\'&]+)/gi,t=e.exec(r),o=[];for(;null!=t;){let u="http://gslb.miaopai.com/stream/"+t[1]+".mp4";if(u=i(u),s(u)){o.push(u);break}t=e.exec(r)}o.length>0?chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(o)}):chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(i(u))})}if(!s(u)&&(a=document.querySelector("video#player-html5"))){let e=a.getAttribute("src");e.length>10&&(e=decodeURIComponent(e),s(e)&&(u=e))}if(!s(u)&&(a=document.querySelector("div#player-wrapper>iframe"))&&(u=a.getAttribute("src"),s(u))){let e=u;u="",$.ajax({type:"GET",dataType:"html",url:e,success:function(e){let t=$(e).find("div#hlsjsvod");if(t&&(u=t.attr("data-url240"),s(u)&&(u=u.replace(".m3u8",".ts"),chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(i(u))}))),!s(u)){let t=/src:\s*\"(.*)\"/i.exec(e);null!=t&&(u=(u=t[1]).replace(".m3u8",".ts"),chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(i(u))}))}}})}if(!t.includes("dailymotion.com")&&!t.includes("youtube.com")){if(s(u)||(a=document.querySelector("meta[property='og:video:secure_url']"))&&(u=a.getAttribute("content")),s(u)||(a=document.querySelector("meta[property='og:video']"))&&(u=a.getAttribute("content")),s(u)||(a=document.querySelector("meta[property='og:videosrc']"))&&(u=a.getAttribute("content")),s(u)||(a=document.querySelector("meta[property='og:video:url']"))&&(u=a.getAttribute("content")),s(u)||(a=document.querySelector("meta[property*='video']"))&&(u=a.getAttribute("content")),s(u)||(a=document.querySelector("source[type='video/mp4']"))&&(u=a.getAttribute("src")),!s(u)){let e=/['"]?video_url['"]?: *(['"])(https?:[^\s'",]+)\1/gi,t=e.exec(r);for(;null!=t&&(u=t[2],!s(u));)t=e.exec(r)}s(u)||(a=document.querySelector("video"))&&(u=a.getAttribute("src"))}if(s(u)||(a=document.querySelector("source[type='video/mp4']"))&&(u=a.getAttribute("src")),u&&(u=u.trim()),s(u))chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(i(u))});else{if(t.includes("pearvideo.com")){let e=[],t=/[hsl]dUrl=[\"\']([^\"\']+)[\'\"]/gi,o=t.exec(r);for(;null!=o;){let u=i(o[1]);s(u)&&e.push(u),o=t.exec(r)}e.length>0&&chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(e)})}if(t.includes("dailymotion.com")){let e=[],t=/mp4[\'\"],[\'\"]url[\'\"]:[\'\"]([^\"\']+)[\'\"]/gi,o=t.exec(r);for(;null!=o;){let u=i(o[1]);s(u)&&e.push(u),o=t.exec(r)}e.length>0&&chrome.runtime.sendMessage({action:"getSource",source:JSON.stringify(e)})}chrome.devtools&&chrome.devtools.network.onRequestFinished.addListener(function(e){e.response.bodySize>102400&&chrome.devtools.inspectedWindow.eval('console.log(unescape("'+escape(e.request.url)+'"))')})}}}()},function(e,t,r){"use strict";const o=["steemit.com","steemkr.com","cnsteem.com","utopian.io","staging.busy.org","steemhunt.com","mspsteem.com","steemdb.com","busy.org","steemd.com"];void 0!==e.exports&&(e.exports={max_url_length:95,steemit_domains:o})},function(e,t,r){"use strict";const{ValidURL:o,extractDomain:u,FixURL:n}=r(0);class i{constructor(e,t=""){this.url=e,this.html=t}Parse(){const e=u(this.url);let t="";return e.includes("miaopai.com")&&(t=i.parse_miaopai_com(this.url,this.html),o(t))?t:e.includes("pearvideo.com")&&(t=i.parse_pearvideo_com(this.url,this.html),o(t))?t:e.includes("ted.com")&&(t=i.parse_ted_com(this.url,this.html),o(t))?t:e.includes("msdn.com")&&(t=i.parse_msdn_com(this.url,this.html),o(t))?t:e.includes("weibo.com")&&(t=i.parse_weibo_com(this.url,this.html),o(t))?t:null!==(t=i.extract_all_video_urls(this.url,this.html))?t:null!==(t=i.extract_all_mp4_urls(this.url,this.html))?t:null}static parse_msdn_com(e,t){const r=/\<meta\s+property\s*=\s*(['"])og:video(.*)\1\s+content=(["'])(https?:\/\/[^'",]*)\3\s*\/?\>/gi;let u=r.exec(t),i=[];for(;null!==u;){const e=n(u[4]);o(e)&&i.push(e),u=r.exec(t)}const s=/(https?:\/\/[^'",]*\.mp4)/gi;let c=s.exec(t);for(;null!==c;){const e=n(c[1]);o(e)&&i.push(e),c=s.exec(t)}return 0===(i=i.uniq()).length?null:1===i.length?i[0]:i}static parse_ted_com(e,t){const r=/(['"])?(low|high|file|medium)\1?:\s*(['"])(https?:[^\s'",]+)/gi;let u=r.exec(t),i=[];for(;null!==u;){const e=n(u[4]);o(e)&&i.push(e),u=r.exec(t)}return 0===(i=i.uniq()).length?null:1===i.length?i[0]:i}static parse_miaopai_com(e,t){let r=/.*miaopai\.com\/show\/(.*)\.html?$/i.exec(e);return null!==r?"http://gslb.miaopai.com/stream/"+r[1]+".mp4":null}static extract_all_video_urls(e,t){const r=/['"]?video_url['"]?:\s*(['"])(https?:[^\s'",]+)\1/gi;let u=r.exec(t),i=[];for(;null!==u;){const e=n(u[2]);o(e)&&i.push(e),u=r.exec(t)}return 0===(i=i.uniq()).length?null:1===i.length?i[0]:i}static parse_pearvideo_com(e,t){let r=[];const u=/([hsl]d|src)Url\s*=\s*[\"\']([^\"\']+)[\'\"]/gi;let i=u.exec(t);for(;null!==i;){const e=n(i[2]);o(e)&&r.push(e),i=u.exec(t)}return 0===(r=r.uniq()).length?null:1===r.length?r[0]:r}static extract_all_mp4_urls(e,t){const r=/mp4[\'\"]\s*,\s*[\'\"]url[\'\"]\s*:\s*[\'\"]([^\"\']+)[\'\"]/gi;let u=r.exec(t),i=[];for(;null!==u;){const e=n(u[1]);o(e)&&i.push(e),u=r.exec(t)}return 0===(i=i.uniq()).length?null:1===i.length?i[0]:i}static parse_weibo_com(e,t){const r=/video_src\s*=([^\\&]+unistore(\,|%2C)video)/gi;let u=r.exec(t),i=[];for(;null!==u;){const e=n(decodeURIComponent(u[1]));o(e)&&i.push(e),u=r.exec(t)}return 0===(i=i.uniq()).length?null:1===i.length?i[0]:i}}void 0!==e.exports&&(e.exports={ParseVideo:i})}]);